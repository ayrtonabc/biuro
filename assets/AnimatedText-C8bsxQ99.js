import{t as T,x as S,u as $,e as I,g as h,k as l,l as x}from"./index-D8IGLSIf.js";function O(t){t.values.forEach(e=>e.stop())}function E(t,e){[...e].reverse().forEach(r=>{const a=t.getVariant(r);a&&S(t,a),t.variantChildren&&t.variantChildren.forEach(i=>{E(i,e)})})}function M(t,e){if(Array.isArray(e))return E(t,e);if(typeof e=="string")return E(t,[e]);S(t,e)}function _(){const t=new Set,e={subscribe(s){return t.add(s),()=>void t.delete(s)},start(s,r){const a=[];return t.forEach(i=>{a.push(T(i,s,{transitionOverride:r}))}),Promise.all(a)},set(s){return t.forEach(r=>{M(r,s)})},stop(){t.forEach(s=>{O(s)})},mount(){return()=>{e.stop()}}};return e}function k(){const t=$(_);return I(t.mount,[]),t}const B=k;var V=new Map,R=new WeakMap,N=0,L=void 0;function z(t){return t?(R.has(t)||(N+=1,R.set(t,N.toString())),R.get(t)):"0"}function P(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?z(t.root):t[e]}`).toString()}function W(t){const e=P(t);let s=V.get(e);if(!s){const r=new Map;let a;const i=new IntersectionObserver(n=>{n.forEach(o=>{var c;const u=o.isIntersecting&&a.some(d=>o.intersectionRatio>=d);t.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=u),(c=r.get(o.target))==null||c.forEach(d=>{d(u,o)})})},t);a=i.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),s={id:e,observer:i,elements:r},V.set(e,s)}return s}function q(t,e,s={},r=L){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const c=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof s.threshold=="number"?s.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:a,observer:i,elements:n}=W(s),o=n.get(t)||[];return n.has(t)||n.set(t,o),o.push(e),i.observe(t),function(){o.splice(o.indexOf(e),1),o.length===0&&(n.delete(t),i.unobserve(t)),n.size===0&&(i.disconnect(),V.delete(a))}}function F({threshold:t,delay:e,trackVisibility:s,rootMargin:r,root:a,triggerOnce:i,skip:n,initialInView:o,fallbackInView:c,onChange:u}={}){var d;const[f,w]=h.useState(null),b=h.useRef(u),[p,m]=h.useState({inView:!!o,entry:void 0});b.current=u,h.useEffect(()=>{if(n||!f)return;let g;return g=q(f,(C,j)=>{m({inView:C,entry:j}),b.current&&b.current(C,j),j.isIntersecting&&i&&g&&(g(),g=void 0)},{root:a,rootMargin:r,threshold:t,trackVisibility:s,delay:e},c),()=>{g&&g()}},[Array.isArray(t)?t.toString():t,f,a,r,i,n,s,c,e]);const y=(d=p.entry)==null?void 0:d.target,A=h.useRef(void 0);!f&&y&&!i&&!n&&A.current!==y&&(A.current=y,m({inView:!!o,entry:void 0}));const v=[w,p.inView,p.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}const G={hidden:{opacity:0,y:20},visible:t=>({opacity:1,y:0,transition:{delay:t*.05,duration:.5}})},H={hidden:{opacity:0,width:0},visible:t=>({opacity:1,width:"100%",transition:{delay:t*.1,duration:.7}})},J={hidden:{opacity:0},visible:t=>({opacity:1,transition:{delay:t*.05,duration:.5,type:"spring",stiffness:500,damping:10}})},K=t=>{switch(t){case"typewriter":return H;case"glitch":return J;default:return G}},U=({text:t,el:e="p",className:s,once:r=!0,repeatDelay:a=0,animation:i="default"})=>{const n=B(),o=Array.isArray(t)?t:[t],{ref:c,inView:u}=F({threshold:.5,triggerOnce:r}),d=h.useRef(null),f=K(i);return h.useEffect(()=>{u?n.start("visible"):r||n.start("hidden")},[n,u,r]),h.useEffect(()=>(a&&u&&!r&&(d.current=setTimeout(()=>{n.start("hidden").then(()=>{n.start("visible")})},a)),()=>{d.current&&clearTimeout(d.current)}),[n,u,r,a]),l.jsxs(e,{className:s,children:[l.jsx("span",{className:"sr-only",children:t}),l.jsx(x.span,{ref:c,initial:"hidden",animate:n,variants:{visible:{transition:{staggerChildren:.1}},hidden:{}},"aria-hidden":!0,children:o.map((w,b)=>l.jsx("span",{className:"block",children:i==="typewriter"?l.jsx(x.span,{custom:b,variants:f,className:"inline-block whitespace-nowrap overflow-hidden",children:w}):w.split(" ").map((p,m)=>l.jsxs("span",{className:"inline-block",children:[i==="glitch"?l.jsx(x.span,{custom:m,variants:f,className:"inline-block text-glitch","data-text":p,children:p}):p.split("").map((y,A)=>l.jsx(x.span,{custom:A,variants:f,className:"inline-block",children:y},`char-${A}`)),l.jsx("span",{className:"inline-block",children:"Â "})]},`word-${m}`))},`line-${b}`))})]})};export{U as A,F as u};
